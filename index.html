<!-- Tugas 1 - Javascript

Soal:
  Menghitung luas dari persegi panjang, bujur sangkar dan segitiga menggunakan variabel dan operator.

Ketentuan:
  1. Tulis kode JavaScript dalam 1 file HTML
  2. Nilai dari parameter/argumen bebas (nilai sisi, panjang, tinggi)
  3. Terdapat keterangan penjelasan berupa komentar tiap fungsi
  
  - Upload file HTML ke akun Github masing-masing. 
  - Hasil link github upload ke file tugas di lms.
  - Hasil tugas melalui github dapat di akses oleh mentor.

Dilarang plagiat. -->

<!-- 
  Nama		      : Muhammad Hunaify Mu’izzy
  ID Kegiatan	  : FWD03157
  Institusi		  : Universitas Pembangunan Nasional “Veteran” Jakarta
  NIM		        : 2310511062
  Kursus        : JavaScript
  Hari/Tanggal	: Rabu, 17 September 2025
-->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
      crossorigin="anonymous"
    />

    <style>
      body {
        --bs-body-font-family: "Montserrat", sans-serif; /* Replace 'YourDesiredFont' */
      }
    </style>

    <title>TP1 JavaScript - Muiz</title>
  </head>
  <body>
    <div class="container py-4">
      <header>
        <h2 class="h4 fw-bold text-center">Hitung Luas Bangun Datar</h2>
      </header>

      <main class="pt-4 d-flex flex-column gap-5">
        <section>
          <!-- Tipe -->
          <div class="input-group mb-3">
            <label for="selectInput" class="input-group-text">Tipe</label>
            <select
              id="selectInput"
              class="form-select w-auto"
              aria-label="Tipe bangun datar"
            >
              <option value="persegiPanjang" selected>Persegi Panjang</option>
              <option value="persegi">Persegi</option>
              <option value="segitiga">Segitiga</option>
            </select>
          </div>
        </section>

        <!-- Input Kalkulasi per Tipe -->
        <section>
          <!-- Persegi Panjang -->
          <div data-wrapper-for="persegiPanjang">
            <div class="input-group mb-3">
              <label for="panjangInput" class="input-group-text">Panjang</label>
              <input
                id="panjangInput"
                type="number"
                min="0"
                class="form-control"
                data-input-for="persegiPanjang"
              />
            </div>

            <div class="input-group mb-3">
              <label for="lebarInput" class="input-group-text">Lebar</label>
              <input
                id="lebarInput"
                type="number"
                min="0"
                class="form-control"
                data-input-for="persegiPanjang"
              />
            </div>

            <p class="text-primary">Luas = panjang × lebar</p>
          </div>

          <!-- Persegi -->
          <div data-wrapper-for="persegi">
            <div class="input-group mb-3">
              <label for="sisiInput" class="input-group-text">Sisi</label>
              <input
                id="sisiInput"
                type="number"
                min="0"
                class="form-control"
                data-input-for="persegi"
              />
            </div>

            <p class="text-primary">Luas = sisi × sisi</p>
          </div>

          <!-- Segitiga -->
          <div data-wrapper-for="segitiga">
            <div class="input-group mb-3">
              <label for="alasInput" class="input-group-text">Alas</label>
              <input
                id="alasInput"
                type="number"
                min="0"
                class="form-control"
                data-input-for="segitiga"
              />
            </div>

            <div class="input-group mb-3">
              <label for="tinggiInput" class="input-group-text">Tinggi</label>
              <input
                id="tinggiInput"
                type="number"
                min="0"
                class="form-control"
                data-input-for="segitiga"
              />
            </div>
            <p class="text-primary">Luas = alas × tinggi / 2</p>
          </div>
        </section>

        <!-- Hasil -->
        <div class="input-group mb-3">
          <label class="input-group-text bg-success text-white">Hasil</label>
          <input
            id="areaResult"
            type="text"
            class="form-control bg-success-subtle"
            readonly
            disabled
          />
        </div>
      </main>
    </div>

    <script>
      const selectInput = document.getElementById("selectInput");
      const areaResult = document.getElementById("areaResult");

      // Mendapatkan nilai aktif select
      function getSelectedValue() {
        return selectInput.selectedOptions[0].value;
      }

      // Handler untuk perubahan nilai select
      function selectInputHandler() {
        clearInputsAndResult();

        toggleDisplayShapeItems(currentShape);

        currentShape = getSelectedValue();
        toggleDisplayShapeItems(currentShape);
      }

      selectInput.addEventListener("change", () => {
        selectInputHandler();
      });

      // Meng-switch tampilan items dari bangun ruang menjadi visible <-> invisible
      function toggleDisplayShapeItems(shape) {
        const shapeWrapper = document.querySelector(
          `[data-wrapper-for="${shape}"]`
        );
        shapeWrapper.classList.toggle("d-none");
      }

      // Menghapus seluruh nilai input dan hasil untuk pengalaman pengguna
      function clearInputsAndResult() {
        const inputs = document.querySelectorAll("[data-input-for]");
        for (const input of inputs) {
          input.value = "";
        }

        areaResult.value = "";
      }

      // Menegubah string value dari input float menjadi float sungguhan
      // Fungsi akan menghasilkan 0 jika string value bukan berupa float
      function getInputNumberFloat(inputId) {
        const element = document.getElementById(inputId);
        const value = Number.parseFloat(element.value);
        return value ? value : 0;
      }

      // Menghitung luas bangun datar berdasarkan string shape yang didapatkan dari nilai aktif <select>
      function calculateArea(shape) {
        if (!shapes.includes(shape)) {
          return 0;
        }

        const areaFns = {
          persegiPanjang:
            getInputNumberFloat("panjangInput") *
            getInputNumberFloat("lebarInput"),

          persegi: getInputNumberFloat("sisiInput") ** 2,

          segitiga:
            (getInputNumberFloat("alasInput") *
              getInputNumberFloat("tinggiInput")) /
            2,
        };

        const area = areaFns[shape];
        areaResult.value = area.toString();

        return area;
      }

      const shapes = ["persegiPanjang", "persegi", "segitiga"];
      for (const shape of shapes) {
        const shapeWrapper = document.querySelector(
          `[data-wrapper-for="${shape}"]`
        );
        shapeWrapper.classList.toggle("d-none");

        const inputs = document.querySelectorAll(`[data-input-for="${shape}"]`);
        for (const input of inputs) {
          input.addEventListener("input", () => {
            calculateArea(input.dataset.inputFor);
          });
        }
      }

      // Tampilkan elemen perhitungan pada awal rendering
      let currentShape = getSelectedValue();
      toggleDisplayShapeItems(currentShape);
    </script>

    <!-- Bootstrap JavaScript -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
